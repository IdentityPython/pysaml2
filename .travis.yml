language: python

sudo: false

env:
- TOXENV=py27
- TOXENV=py34

addons:
  apt:
    packages:
    - xmlsec1

services:
- mongodb

install:
- pip install -U tox

script:
- tox

deploy:
- provider: pypi
  distributions: sdist bdist_wheel
  password:
    secure: ZDp7AjFTyyCqv37ytR/rIpg42swIDb2jsLGZLM+R0BVywd8JHZAN2T3cGQW7VsWyTYixEL/IGP9HSZbFzF1bjNw5O/P4YotEXTtvjuJQJd7/qYH1Cx7ZhL/h2Z0goiwRxmvfRBxjPR4M10NUZiUEnZ7DSGUYE7Bh8zVnNl1883mrSWwxTqrdo7nAZJobjFS9+5mmW79JIqZMxkOhxJTVR2kWxubAMH9y538QrAxT3XTb9GeKZaQ4yWPJRnDBodKM50Xp6+q7Z8Kh9ND126u4zTrnBsf7VkxnJOYr+ogkmhbV0nzWbEx8EClHcaTNZPUKzgFE2/D9oxfYZ2wZ3ejhCrJwknmme9PKU8BejX0RnEXIeodmJ+HSKogVj68ZirLEfj5nZr1mXiDLKnofTTr93bb2FqP+9Az/3dGs4pOdVns9iRv0pDZUaWQtGj6rT11OyMQzaTlEKVlxfsgyu80dLUxKpnnsheF/hfEiyHH/v6AAyOO641aV8Sy1mV4Q50cjzKehCNK4WSNiptUON8XKmhalNSmQ+cdcI/WtDUfw1MFf3a5ywvvNQMUDkrAfUJtJxKwef6osOV0ULyVxKc2maPA63UqgW8FZW43qtqRx1q4PG5DIzXEhJieLlJLoyfr+uDrb7FHY0Tv7g7Z0Ov/6gZYQ5D/xVaIFi8QEaplZ+go=
  username:
    secure: Pnhp2shnvnsQxRvTK21b6geBckQfcVxeTlygqORoLyFip5YletkrNXPxzE/RGtoj74GyC25inJiPqgoXYAQGYULRJFavEnSpwd8LB3kR8K2ZJo6++yj5AncHuDy22WYKqQHVgYNWBJsJVhA8Zxk02io7epRjx8w2DeYgrT69sjCaFVDhP+xnVTIMPbHbf4vkzvi5+K7BpciyDmc5k9Z1Vci8eu9mtP2cbsOv2Nm/pytijR3G+2UFofJY5Wobupkg4H78/m6gPWcn0cEU7yOnzfMcbLpMlRhMJbnjlSz2uHcDMF+ACaExt3FT+2TrPkxc6SBNha7O98h3XDi5DcXKbu0yrkZ+FYVp9nQ/Bo5wK0CyMkK4OfvkV4Map7YiLjHpWwYMGzXvsaPr8Q8jn0GRPy5toh117P1TlBz9mA9FRikUfLEP1mHzzD2Ei8XjgApzE+UGEtAKW4Gru1eV3pRbUF4kDHw4CuiC6lPULk56+1Lhgn4VXWamAwqF8yrtO6OnKmg6SMWklRvAx6SjE3fme/57m87/AdUpWXPVD1eTh2TJXsAxNnC6o8lvaIrfJ/I7OKVVhNphVU3onNo67VG7+xLxwZdhZq9tTuReGgSOAlQSWMSzOWvoML+kobJvoOUQbddeBAiI8Kt7w+f/sHI2ONDcZrHW9WFU/Iq/rDoFJv4=
  on:
    tags: true
    condition: "$TOXENV = py27"
- provider: pypi
  distributions: sdist bdist_wheel
  password:
    secure: ZDp7AjFTyyCqv37ytR/rIpg42swIDb2jsLGZLM+R0BVywd8JHZAN2T3cGQW7VsWyTYixEL/IGP9HSZbFzF1bjNw5O/P4YotEXTtvjuJQJd7/qYH1Cx7ZhL/h2Z0goiwRxmvfRBxjPR4M10NUZiUEnZ7DSGUYE7Bh8zVnNl1883mrSWwxTqrdo7nAZJobjFS9+5mmW79JIqZMxkOhxJTVR2kWxubAMH9y538QrAxT3XTb9GeKZaQ4yWPJRnDBodKM50Xp6+q7Z8Kh9ND126u4zTrnBsf7VkxnJOYr+ogkmhbV0nzWbEx8EClHcaTNZPUKzgFE2/D9oxfYZ2wZ3ejhCrJwknmme9PKU8BejX0RnEXIeodmJ+HSKogVj68ZirLEfj5nZr1mXiDLKnofTTr93bb2FqP+9Az/3dGs4pOdVns9iRv0pDZUaWQtGj6rT11OyMQzaTlEKVlxfsgyu80dLUxKpnnsheF/hfEiyHH/v6AAyOO641aV8Sy1mV4Q50cjzKehCNK4WSNiptUON8XKmhalNSmQ+cdcI/WtDUfw1MFf3a5ywvvNQMUDkrAfUJtJxKwef6osOV0ULyVxKc2maPA63UqgW8FZW43qtqRx1q4PG5DIzXEhJieLlJLoyfr+uDrb7FHY0Tv7g7Z0Ov/6gZYQ5D/xVaIFi8QEaplZ+go=
  username:
    secure: Pnhp2shnvnsQxRvTK21b6geBckQfcVxeTlygqORoLyFip5YletkrNXPxzE/RGtoj74GyC25inJiPqgoXYAQGYULRJFavEnSpwd8LB3kR8K2ZJo6++yj5AncHuDy22WYKqQHVgYNWBJsJVhA8Zxk02io7epRjx8w2DeYgrT69sjCaFVDhP+xnVTIMPbHbf4vkzvi5+K7BpciyDmc5k9Z1Vci8eu9mtP2cbsOv2Nm/pytijR3G+2UFofJY5Wobupkg4H78/m6gPWcn0cEU7yOnzfMcbLpMlRhMJbnjlSz2uHcDMF+ACaExt3FT+2TrPkxc6SBNha7O98h3XDi5DcXKbu0yrkZ+FYVp9nQ/Bo5wK0CyMkK4OfvkV4Map7YiLjHpWwYMGzXvsaPr8Q8jn0GRPy5toh117P1TlBz9mA9FRikUfLEP1mHzzD2Ei8XjgApzE+UGEtAKW4Gru1eV3pRbUF4kDHw4CuiC6lPULk56+1Lhgn4VXWamAwqF8yrtO6OnKmg6SMWklRvAx6SjE3fme/57m87/AdUpWXPVD1eTh2TJXsAxNnC6o8lvaIrfJ/I7OKVVhNphVU3onNo67VG7+xLxwZdhZq9tTuReGgSOAlQSWMSzOWvoML+kobJvoOUQbddeBAiI8Kt7w+f/sHI2ONDcZrHW9WFU/Iq/rDoFJv4=
  on:
    branch: master
    condition: "$TOXENV = py27"
